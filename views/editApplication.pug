html
  head 
    title="Task Management System"
    meta(charset='utf-8')
    meta(name='viewport' content='width=device-width, initial-scale=1.0')
    link(href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet")
    link(rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css")
    link(type="text/css" href="/style.css" rel="stylesheet")
  body
    include ./navbar.pug
      h2(style="text-align: left")=`Edit Application: ${app}`
      if error
          p(class="alert alert-danger")=error
      if success
          p(class="alert alert-success")=success
      div
        form(class="row g-3" method="post")
          div(class="form-group col-md-6")
            label="Application Name:"
            input(type="text" class="form-control" name="appname" placeholder="appname" value=`${app}` readonly)
            input(type="hidden" name="appname" value=`${app}`)
          each app in appList 
            div(class="form-group col-md-6")
              label="Application Release Number:"
              input(type="text" class="form-control" name="apprnumber" value=`${app.rnumber}` readonly)
            div(class="form-group")
              label="Application Description:"
              textarea(class="form-control" name="appdescription" placeholder=`${app.description}` value=`${app.description}` rows="3")
            div(class="form-group col-md-6")
              label="Start Date:"
              input(type="date" class="form-control" name="startdate" placeholder=`${app.startdate}` value=`${app.startdate}`)
            div(class="form-group col-md-6")
              label="End Date:"
              input(type="date" class="form-control" name="enddate" placeholder=`${app.enddate}` value=`${app.enddate}`)
          div(class="form-group")
            label="Permissions for Respective Permits:"
            block content
            table(class="table table-bordered table-sm")
              tr 
                th Create Task Permit:
                td 
                  select(class="form-select" name="p_createTask")
                    option(value="" disabled selected)="-- Select a group --"
                    if permitArray
                      each g in permitArray 
                        option(value=`${g.groupname}`)=`${g.groupname}`  
              tr 
                th Create Plan Permit:
                td 
                  select(class="form-select" name="p_createPlan")
                    option(value="" disabled selected)="-- Select a group --"
                    if permitArray
                      each g in permitArray 
                        option(value=`${g.groupname}`)=`${g.groupname}`  
              tr 
                th Open Permit:
                td 
                  select(class="form-select" name="p_open")
                    option(value="" disabled selected)="-- Select a group --"
                    if permitArray
                      each g in permitArray 
                        option(value=`${g.groupname}`)=`${g.groupname}`
              tr 
                th To-Do-List Permit:
                td 
                  select(class="form-select" name="p_toDoList")
                    option(value="" disabled selected)="-- Select a group --"
                    if permitArray
                      each g in permitArray 
                        option(value=`${g.groupname}`)=`${g.groupname}`
              tr 
                th Doing Permit:
                td 
                  select(class="form-select" name="p_doing")
                    option(value="" disabled selected)="-- Select a group --"
                    if permitArray
                      each g in permitArray 
                        option(value=`${g.groupname}`)=`${g.groupname}`
              tr 
                th Done Permit:
                td 
                  select(class="form-select" name="p_done")
                    option(value="" disabled selected)="-- Select a group --"
                    if permitArray
                      each g in permitArray 
                        option(value=`${g.groupname}`)=`${g.groupname}`
        
          div(class="form-group")
            button(type="submit" class="btn btn mb-3" 
            style="background-color: #f8e5e7; color: black; font-weight: bold; width: 10%; padding: 14px 20px; margin: auto; cursor: pointer;")="Edit"
            button(type="button" class="btn btn mb-3" 
            style="background-color: #98fb98;  color: black; font-weight: bold; width: 10%; padding: 14px 20px; margin: auto; cursor: pointer;" 
            onclick=`window.location='/applicationList'`)="Back"