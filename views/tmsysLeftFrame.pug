html
  head 
    title="Task Management System"
    meta(charset='utf-8')
    meta(name='viewport' content='width=device-width, initial-scale=1.0')
    link(href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet")
    link(rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css")
    link(type="text/css" href="style.css" rel="stylesheet")
  body
    h1="Application"
    table(cellspacing="0" cellpadding="0" style="border: none;")
      for app in appList
        tr
          td
            button(type="button" value=app.appname style="background-color: #f8e5e7;" class="btn btn mb-3 custom1")=app.appname
              //-a(style="text-decoration: none; color: black;" type="submit")=app.appname
    script.
        console.dir(parent[2]);
        var frame2 = parent[2];
        frame2.addEventListener('customEvent', function(event) {
            frame2.setAttribute('src', '/taskList?requestapp='+event.detail);
            console.log(">>>frame 2 received a customEvent.");
        })
        var x = document.getElementsByClassName('custom1');
        console.dir(x);
        for (var i = 0; i < x.length; i++) {
            x[i].addEventListener('click', function(event) {
                console.dir(event.target);
                const e = new CustomEvent('customEvent', { detail: event.target.getAttribute('value')});
                event.target.dispatchEvent(e);
                console.log(">>>a button sent a customEvent! " + event.target.getAttribute('value'));
            });
            console.log(">>>added a click event to " + x[i].getAttribute('value'));
        }
        
            